define(["controller/controllers","libs/jquery","libs/bootstrap-tooltip","libs/bootstrap-popover"],function(e,t){e.controller("HealthCtrl",["$scope","$http",function(n,r){n.loadHealth=function(){r.get("/api/admin/metrics/health").success(function(e){n.health=e})},n.clearMachine=function(e){t("[rel=tooltip]").tooltip("hide"),r.post("/api/admin/metrics/remove",{machine:e}).success(function(){n.refresh()})},n.refresh=function(){n.loadHealth()},n.healthStatus=function(e){return e.healthy?"alert-success":"alert-error"},n.healthInfo=function(e){var t=_healthIcon(e);return e.message?'<i class="'+t+'" rel="popover" data-content="'+e.message+'" data-original-title="Status Message"></i>':'<i class="'+t+'"></i>'},n.diffTime=function(e){return Math.round(((new Date).getTime()-e)/1e3)},_healthIcon=function(e){return e.healthy?"icon-ok":"icon-remove"},n.$watch("health",function(){n.$evalAsync(function(){t("[rel=popover]").popover({placement:"bottom"}),t("[rel=tooltip]").tooltip({placement:"right"})})}),n.loadHealth()}])})